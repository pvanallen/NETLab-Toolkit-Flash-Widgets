package net.newecologyofthings.toolkit {		import flash.system.Capabilities;	import flash.display.Loader;	import flash.display.Sprite;	import flash.display.MovieClip;	import flash.events.*;		public class ToggleButton extends MovieClip {  		private var _text:String;		private var button:MovieClip;		private var widget:MovieClip;		private var buttonType:String;			  		public function ToggleButton(button:MovieClip, widget:MovieClip, buttonType:String) {									this.button = button;			this.widget = widget;			this.buttonType = buttonType;			_text = "off";						button.addEventListener(MouseEvent.MOUSE_UP, toggle);			button.buttonMode = true;		}				private function toggle(event:Event): void {						if (text == "off") {				text = "on";			} else {				text = "off";			}			dispatchEvent(new Event(Event.CHANGE));		}				public function setState(value:String):void {			if (value == "on") {				_text = "on";				button.gotoAndStop(2);			} else { // default to off for off or any other value				_text = "off";				button.gotoAndStop(1);			}		}				public function get text():String { return _text; }		public function set text(value:String):void {			setState(value);			widget.handleButton(buttonType, text);		}	}}